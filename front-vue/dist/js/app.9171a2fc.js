(function(e){function t(t){for(var n,i,r=t[0],s=t[1],l=t[2],u=0,m=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(m.length)m.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},o={app:0},c=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=s;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),o=a.n(n);o.a},"151f":function(e,t,a){},"167e":function(e,t,a){},5170:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],i={name:"app"},r=i,s=(a("034f"),a("2877")),l=Object(s["a"])(r,o,c,!1,null,null,null),d=l.exports,u=(a("0d03"),a("8c4f")),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"layout"},[a("Layout",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-logo"},[a("MenuItem",{attrs:{name:"4"}},[a("Button",{attrs:{type:"success"},on:{click:e.backup}},[e._v("备份数据")])],1)],1),a("div",{staticClass:"layout-nav"},[a("MenuItem",{attrs:{name:"1"}},[a("Button",{attrs:{type:"warning"},on:{click:e.addAccount}},[e._v("添加账户")])],1),a("MenuItem",{attrs:{name:"2"}},[a("Button",{attrs:{type:"primary"},on:{click:e.addMachine}},[e._v("添加机器")])],1),a("AddAccount",{attrs:{showModal:e.showAddAccount},on:{"update:showModal":function(t){e.showAddAccount=t},"update:show-modal":function(t){e.showAddAccount=t}}}),a("AddMachine",{attrs:{showModal:e.showAddMachine},on:{"update:showModal":function(t){e.showAddMachine=t},"update:show-modal":function(t){e.showAddMachine=t}}})],1)])],1),a("Layout",[a("Sider",{style:{background:"#fff",height:"100%"},attrs:{"hide-trigger":""}},[a("Menu",{attrs:{theme:"light",width:"auto","open-names":["1"]}},[a("Submenu",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-navigate"}}),e._v("账户信息 ")],1),a("MenuItem",{attrs:{name:"1-1",to:"/home/accounts/all"}},[e._v("所有账户")]),a("MenuItem",{attrs:{name:"1-2",to:"/home/accounts/used"}},[e._v("使用中的账户")]),a("MenuItem",{attrs:{name:"1-3",to:"/home/accounts/unuse"}},[e._v("闲置账户")])],2),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-analytics"}}),e._v("机器管理 ")],1),a("MenuItem",{attrs:{name:"2-1",to:"/home/machines/formal"}},[e._v("有效的机器")]),a("MenuItem",{attrs:{name:"2-2",to:"/home/machines/useful"}},[e._v("有效未用的机器")]),a("MenuItem",{attrs:{name:"2-3",to:"/home/machines/expose"}},[e._v("过期的机器")])],2),a("Submenu",{attrs:{name:"3"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-medkit"}}),e._v("备份数据 ")],1),e._l(e.backups,(function(t){return a("MenuItem",{key:t,attrs:{name:t}},[e._v(e._s(t))])}))],2)],1)],1),a("Layout",{style:{padding:"0 24px 24px"}},[a("Content",{style:{padding:"24px",background:"#fff",height:"100%"}},[a("router-view")],1)],1)],1)],1)],1)])},h=[],p=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-account"},[a("Modal",{attrs:{title:"添加账户",loading:e.loading},on:{"on-ok":function(t){return e.asyncOK("accountFormValidate")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{ref:"accountFormValidate",attrs:{model:e.accountFormValidate,"label-width":120}},[a("FormItem",{attrs:{label:"账户代号",prop:"account_no",rules:{required:!0,message:"账户代号, 如：a101",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户代号"},model:{value:e.accountFormValidate.account_no,callback:function(t){e.$set(e.accountFormValidate,"account_no",t)},expression:"accountFormValidate.account_no"}})],1),a("FormItem",{attrs:{label:"账户邮箱",prop:"account_mail",rules:{required:!0,message:"账户邮箱, 如：1234555@gmail.com",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户邮箱"},model:{value:e.accountFormValidate.account_mail,callback:function(t){e.$set(e.accountFormValidate,"account_mail",t)},expression:"accountFormValidate.account_mail"}})],1),a("FormItem",{attrs:{label:"账户密码",prop:"account_password",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户密码"},model:{value:e.accountFormValidate.account_password,callback:function(t){e.$set(e.accountFormValidate,"account_password",t)},expression:"accountFormValidate.account_password"}})],1),a("FormItem",{attrs:{label:"验证邮箱",prop:"verify_mail",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入验证邮箱"},model:{value:e.accountFormValidate.verify_mail,callback:function(t){e.$set(e.accountFormValidate,"verify_mail",t)},expression:"accountFormValidate.verify_mail"}})],1),a("FormItem",{attrs:{label:"代理人"}},[a("i-input",{attrs:{placeholder:"输入代理名字"},model:{value:e.accountFormValidate.agent_name,callback:function(t){e.$set(e.accountFormValidate,"agent_name",t)},expression:"accountFormValidate.agent_name"}})],1),a("FormItem",{attrs:{label:"代理时间",prop:"agent_date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"代理的授权日期"},model:{value:e.accountFormValidate.agent_date,callback:function(t){e.$set(e.accountFormValidate,"agent_date",t)},expression:"accountFormValidate.agent_date"}})],1),a("FormItem",{attrs:{label:"代理截止日期",prop:"end_date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"代理的截止日期"},model:{value:e.accountFormValidate.end_date,callback:function(t){e.$set(e.accountFormValidate,"end_date",t)},expression:"accountFormValidate.end_date"}})],1),a("FormItem",{attrs:{label:"选择机器",prop:"machine_no"}},[a("Select",{attrs:{placeholder:"选择机器",clearable:""},model:{value:e.accountFormValidate.machine_no,callback:function(t){e.$set(e.accountFormValidate,"machine_no",t)},expression:"accountFormValidate.machine_no"}},e._l(e.getMachinesWithState("useful"),(function(t){return a("Option",{key:t.machine_no,attrs:{value:t.machine_no}},[e._v(e._s(t.machine_no))])})),1)],1),a("FormItem",{attrs:{label:"输入备注"}},[a("i-input",{attrs:{placeholder:"输入备注"},model:{value:e.accountFormValidate.tip,callback:function(t){e.$set(e.accountFormValidate,"tip",t)},expression:"accountFormValidate.tip"}})],1)],1)],1)],1)},_=[],b=a("2f62");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={name:"AddAccount",props:{showModal:Boolean},data:function(){return{show:!1,loading:!0,accountFormValidate:{account_no:"",account_mail:"",account_password:"",verify_mail:"",agent_name:"",agent_date:"",end_date:"",machine_no:"",tip:""}}},computed:v({},Object(b["d"])(["agents"]),{},Object(b["c"])(["getMachinesWithState"])),methods:v({},Object(b["b"])(["addAccount"]),{asyncOK:function(e){var t=this;this.$refs[e].validate((function(e){e?t.addAccount({me:t,data:{account_no:t.accountFormValidate.account_no,account_mail:t.accountFormValidate.account_mail,account_password:t.accountFormValidate.account_password,verify_mail:t.accountFormValidate.verify_mail,agent_name:t.accountFormValidate.agent_name,agent_date:t.accountFormValidate.agent_date,end_date:t.accountFormValidate.end_date,machine_no:t.accountFormValidate.machine_no,tip:t.accountFormValidate.tip}}):t.$Message.warning("请检查你的输入内容")})),this.show=!1,this.$refs[e].resetFields()}}),watch:{showModal:function(){this.show=this.showModal},show:function(){this.$emit("update:showModal",this.show)}}},y=w,F=Object(s["a"])(y,f,_,!1,null,"0120389d",null),O=F.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-machine"},[a("Modal",{attrs:{title:"添加机器",loading:e.loading},on:{"on-ok":function(t){return e.asyncOK("machineFormValidate")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{ref:"machineFormValidate",attrs:{model:e.machineFormValidate,"label-width":120}},[a("FormItem",{attrs:{label:"机器代号",prop:"machine_no",rules:{required:!0,message:"账户代号, 如：a101",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入机器代号"},model:{value:e.machineFormValidate.machine_no,callback:function(t){e.$set(e.machineFormValidate,"machine_no",t)},expression:"machineFormValidate.machine_no"}})],1),a("FormItem",{attrs:{label:"机器IP",prop:"machine_ip",rules:{required:!0,message:"机器IP必填，如：192.168.1.1:6666",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入代理机器IP"},model:{value:e.machineFormValidate.machine_ip,callback:function(t){e.$set(e.machineFormValidate,"machine_ip",t)},expression:"machineFormValidate.machine_ip"}})],1),a("FormItem",{attrs:{label:"机器密码",prop:"machine_password",rules:{required:!0,min:6,message:"密码必填不少于6位",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入机器密码"},model:{value:e.machineFormValidate.machine_password,callback:function(t){e.$set(e.machineFormValidate,"machine_password",t)},expression:"machineFormValidate.machine_password"}})],1),a("FormItem",{attrs:{label:"机器创建日期",prop:"machine_create_date",rules:{required:!0}}},[a("DatePicker",{attrs:{type:"date",placeholder:"机器创建日期"},model:{value:e.machineFormValidate.machine_create_date,callback:function(t){e.$set(e.machineFormValidate,"machine_create_date",t)},expression:"machineFormValidate.machine_create_date"}})],1),a("FormItem",{attrs:{label:"机器截止日期",prop:"machine_end_date",rules:{required:!0}}},[a("DatePicker",{attrs:{type:"date",placeholder:"代理的截止日期"},model:{value:e.machineFormValidate.machine_end_date,callback:function(t){e.$set(e.machineFormValidate,"machine_end_date",t)},expression:"machineFormValidate.machine_end_date"}})],1)],1)],1)],1)},M=[];function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A={name:"AddMachine",props:{showModal:Boolean},data:function(){return{show:!1,loading:!0,machineFormValidate:{machine_no:"",machine_ip:"",machine_password:"",machine_create_date:"",machine_end_date:""}}},methods:j({},Object(b["b"])(["addMachine"]),{asyncOK:function(e){var t=this;this.$refs[e].validate((function(e){e?t.addMachine({me:t,data:{machine_no:t.machineFormValidate.machine_no,machine_ip:t.machineFormValidate.machine_ip,machine_password:t.machineFormValidate.machine_password,machine_create_date:t.machineFormValidate.machine_create_date,machine_end_date:t.machineFormValidate.machine_end_date}}):t.$Message.warning("请检查你填写的数据")})),this.$refs[e].resetFields(),this.show=!1}}),watch:{showModal:function(){this.show=this.showModal},show:function(){this.$emit("update:showModal",this.show)}}},x=A,P=Object(s["a"])(x,k,M,!1,null,"78521dbc",null),D=P.exports,$=(a("a15b"),a("4fad"),a("d3b7"),a("3835")),I=(a("96cf"),a("bc3a")),S=a.n(I);S.a.defaults.headers.post["Content-Type"]="application/x-www-from-urlencode",S.a.defaults.timeout=5e3,S.a.interceptors.request.use((function(e){var t=localStorage.getItem("Authorization");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)})),S.a.interceptors.response.use((function(e){return 200===!e.status?Promise.reject(e):e}),(function(e){return Promise.reject(e)}));var E=function(){var e,t,a,n,o,c,i,r,s,l=arguments;return regeneratorRuntime.async((function(d){while(1)switch(d.prev=d.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:"",t=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:"get",a=a.toLowerCase(),"get"!==a){d.next=11;break}for(n=[],o=0,c=Object.entries(t);o<c.length;o++)i=Object($["a"])(c[o],2),r=i[0],s=i[1],n.push(r+"="+s);return n.length>0&&(e+="?"+n.join("&")),d.abrupt("return",new Promise((function(t,a){S.a.get(e).then((function(e){t(e.data)}),(function(e){a(e)})).catch((function(e){a(e)}))})));case 11:if("post"!==a){d.next=15;break}return d.abrupt("return",new Promise((function(a,n){S.a.post(e,t).then((function(e){a(e.data)}),(function(e){n(e)}))})));case 15:return d.abrupt("return",Promise.reject("传递参数错误"));case 16:case"end":return d.stop()}}))},C={getAllInfo:function(){return E("api/getallinfo")},addAccount:function(e){return E("api/add/account",e,"post")},editAccount:function(e){return E("api/edit/account",e,"post")},editMachine:function(e){return E("api/edit/machine",e,"post")},addMachine:function(e){return E("api/add/machine",e,"post")},addAgent:function(e){return E("api/add/agent",e,"post")},delAccount:function(e){return E("api/del/account",e,"post")},delMachine:function(e){return E("api/del/machine",e,"post")},backup:function(){return E("api/backup")},getBackupFiles:function(){return E("api/getbackupfiles")},load:function(e,t){var a=window.btoa(e+"::"+t);return E("/api/load?token="+a)}};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z={name:"Home",components:{AddAccount:O,AddMachine:D},data:function(){return{showAddAccount:!1,showAddMachine:!1}},created:function(){this.fetchAllInfo()},computed:B({},Object(b["d"])(["backups"])),methods:B({},Object(b["b"])(["backupFile","initAllInfo"]),{addAccount:function(){this.showAddAccount=!0},addMachine:function(){this.showAddMachine=!0},backup:function(){this.backupFile(this)},fetchAllInfo:function(){var e=this;this.initAllInfo(this),C.getBackupFiles().then((function(t){console.log("======> 获取备份文件目录: ",t),"ok"===t.message?e.$store.commit("initBackupFiles",t.data):e.$Message.warning(t.message)}))}})},W=z,K=(a("90b7"),Object(s["a"])(W,m,h,!1,null,"0333e512",null)),N=K.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"load"},[a("h1",{staticClass:"title"},[e._v("远程科技管理系统")]),a("div",{staticClass:"from"},[a("Form",{ref:"loadForm",attrs:{model:e.loadData,"label-width":80}},[a("FormItem",{attrs:{label:"用户名",prop:"user",rules:{required:!0,min:1,message:"用户名不能为空",trigger:"blur"}}},[a("i-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loadData.user,callback:function(t){e.$set(e.loadData,"user",t)},expression:"loadData.user"}})],1),a("FormItem",{attrs:{label:"密码",prop:"password",rules:{required:!0,min:6,message:"密码最少6位",trigger:"blur"}}},[a("i-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loadData.password,callback:function(t){e.$set(e.loadData,"password",t)},expression:"loadData.password"}})],1)],1)],1),a("div",{staticClass:"btn"},[a("Button",{staticClass:"lod",attrs:{type:"primary"},on:{click:e.loadOK}},[e._v("登录")]),a("Button",[e._v("取消")])],1)])},R=[],L={name:"Load",data:function(){return{loadData:{user:"",password:""}}},methods:{loadOK:function(){var e=this;0!=this.loadData.user.length&&0!=this.loadData.password?C.load(this.loadData.user,this.loadData.password).then((function(t){if("ok"===t.message){localStorage.setItem("Authorization",e.loadData.user);var a=new Date;localStorage.setItem("AuthDate",a),e.$router.push("/home")}else console.log("==> load info: ",t),localStorage.setItem("Authorization",""),localStorage.setItem("AuthDate",""),e.$Message.warning({content:"登录失败请检查你的用户名和密码",duration:2})})):this.$Message.error("检查你的账户或密码")}}},H=L,J=(a("6776"),Object(s["a"])(H,T,R,!1,null,"c246ea94",null)),Y=J.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"backup"})},Q=[],U={name:"Backup"},X=U,Z=Object(s["a"])(X,G,Q,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account"},[a("Table",{attrs:{border:"",size:"small","highlight-row":!0,columns:e.account_label,data:e.getAccountsWithState(e.$route.params.state)},scopedSlots:e._u([{key:"account_no",fn:function(t){var n=t.row;return[a("strong",[e._v(e._s(n.account_no))])]}},{key:"action",fn:function(t){var n=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(n)}}},[e._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(n)}}},[e._v("删除")])]}}])}),a("EditAccount",{attrs:{showModal:e.showEditAccount,accountDetail:e.activeRow},on:{"update:showModal":function(t){e.showEditAccount=t},"update:show-modal":function(t){e.showEditAccount=t}}})],1)},ae=[],ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-account"},[a("Modal",{attrs:{title:"编辑账户",loading:e.loading},on:{"on-ok":function(t){return e.asyncOK("editAccountFormValidate")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{ref:"editAccountFormValidate",attrs:{model:e.editAccountFormValidate,"label-width":80}},[a("FormItem",{attrs:{label:"账户代号",prop:"account_no",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户代号",readonly:""},model:{value:e.editAccountFormValidate.account_no,callback:function(t){e.$set(e.editAccountFormValidate,"account_no",t)},expression:"editAccountFormValidate.account_no"}})],1),a("FormItem",{attrs:{label:"账户邮箱",prop:"account_mail",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户邮箱"},model:{value:e.editAccountFormValidate.account_mail,callback:function(t){e.$set(e.editAccountFormValidate,"account_mail",t)},expression:"editAccountFormValidate.account_mail"}})],1),a("FormItem",{attrs:{label:"账户密码",prop:"account_password",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入账户密码"},model:{value:e.editAccountFormValidate.account_password,callback:function(t){e.$set(e.editAccountFormValidate,"account_password",t)},expression:"editAccountFormValidate.account_password"}})],1),a("FormItem",{attrs:{label:"验证邮箱",prop:"verify_mail",rules:{required:!0,trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入验证邮箱"},model:{value:e.editAccountFormValidate.verify_mail,callback:function(t){e.$set(e.editAccountFormValidate,"verify_mail",t)},expression:"editAccountFormValidate.verify_mail"}})],1),a("FormItem",{attrs:{label:"代理人",prop:"agent_name"}},[a("i-input",{attrs:{placeholder:"输入代理人名称"},model:{value:e.editAccountFormValidate.agent_name,callback:function(t){e.$set(e.editAccountFormValidate,"agent_name",t)},expression:"editAccountFormValidate.agent_name"}})],1),a("FormItem",{attrs:{label:"服务器"}},[a("Select",{staticStyle:{width:"250px"},attrs:{placeholder:"选择服务器",clearable:""},model:{value:e.editAccountFormValidate.machine_no,callback:function(t){e.$set(e.editAccountFormValidate,"machine_no",t)},expression:"editAccountFormValidate.machine_no"}},e._l(e.getEditMachines(e.accountDetail.machine_no),(function(t){return a("Option",{key:t.machine_no,attrs:{value:t.machine_no}},[e._v(e._s(t.machine_no))])})),1)],1),a("FormItem",{attrs:{label:"创建日期"}},[a("i-input",{attrs:{readonly:""},model:{value:e.editAccountFormValidate.create_date,callback:function(t){e.$set(e.editAccountFormValidate,"create_date",t)},expression:"editAccountFormValidate.create_date"}})],1),a("FormItem",{attrs:{label:"授权时间"}},[a("DatePicker",{attrs:{type:"date",placeholder:"代理的授权日期"},model:{value:e.editAccountFormValidate.agent_date,callback:function(t){e.$set(e.editAccountFormValidate,"agent_date",t)},expression:"editAccountFormValidate.agent_date"}})],1),a("FormItem",{attrs:{label:"代理时间"}},[a("DatePicker",{attrs:{type:"date",placeholder:"代理的到期日期"},model:{value:e.editAccountFormValidate.end_date,callback:function(t){e.$set(e.editAccountFormValidate,"end_date",t)},expression:"editAccountFormValidate.end_date"}})],1),a("FormItem",{attrs:{label:"剩余时间"}},[a("i-input",{attrs:{placeholder:"输入该账号的使用时间",readonly:""},model:{value:e.editAccountFormValidate.time_left,callback:function(t){e.$set(e.editAccountFormValidate,"time_left",t)},expression:"editAccountFormValidate.time_left"}})],1),a("FormItem",{attrs:{label:"备注信息"}},[a("i-input",{attrs:{placeholder:"输入备注"},model:{value:e.editAccountFormValidate.tip,callback:function(t){e.$set(e.editAccountFormValidate,"tip",t)},expression:"editAccountFormValidate.tip"}})],1)],1)],1)],1)},oe=[],ce=(a("ac1f"),a("25f0"),a("5319"),a("53ca")),ie={dateDifference:function(e){if(null==e||""==e)return"0";var t=Date.parse(e.replace(/-/g,"/")),a=new Date,n=t-a+864e5;return n>0?Math.floor(n/864e5).toString():"0"},deepCopy:function(e){var t=Array.isArray(e)?[]:{};for(var a in e)e.hasOwnProperty(a)&&("object"===Object(ce["a"])(e[a])&&null!==e[a]?t[a]=this.deepCopy(e[a]):t[a]=e[a]);return t},formatDate:function(e){if(""==e)return"";var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),c=a+"-"+(n<=9?"0"+n:n)+"-"+(o<=9?"0"+o:o);return c}};function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le={name:"EditAccount",props:{showModal:Boolean,accountDetail:Object},data:function(){return{show:!1,loading:!0,editAccountFormValidate:{}}},computed:se({},Object(b["d"])(["agents"]),{},Object(b["c"])(["getEditMachines"])),methods:se({},Object(b["b"])(["editAccount"]),{asyncOK:function(e){var t=this;console.log("===> editAccountFormValidate data: ",this.editAccountFormValidate),this.$refs[e].validate((function(e){e?(t.editAccountFormValidate.agent_date=ie.formatDate(t.editAccountFormValidate.agent_date),t.editAccountFormValidate.end_date=ie.formatDate(t.editAccountFormValidate.end_date),t.editAccount({me:t,data:t.editAccountFormValidate})):t.$Message.warning("请检查你的输入内容")})),this.show=!1}}),watch:{showModal:function(){this.show=this.showModal},show:function(){this.$emit("update:showModal",this.show)},accountDetail:function(e){this.editAccountFormValidate=ie.deepCopy(e)}}},de=le,ue=Object(s["a"])(de,ne,oe,!1,null,"5b8b7e5a",null),me=ue.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticClass:"expand-row"},[a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("账户邮箱: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.account_mail))])]),a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("账户密码: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.account_password))])]),a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("验证邮箱: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.verify_mail))])])],1),a("Row",[a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("创建日期: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.create_date))])]),a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("授权日期: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.agent_date))])]),a("i-col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[e._v("到期日期: ")]),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.end_date))])])],1)],1)},pe=[],fe={name:"ExpandRow",props:{row:Object}},_e=fe,be=(a("9cff"),Object(s["a"])(_e,he,pe,!1,null,"ad22d9ce",null)),ge=be.exports;function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye={name:"Account",components:{EditAccount:me},data:function(){return{showEditAccount:!1,activeRow:{},account_label:[{type:"expand",width:50,render:function(e,t){return e(ge,{props:{row:t.row}})}},{title:"账号代号",width:110,sortable:!0,slot:"account_no"},{title:"机器代号",sortable:!0,key:"machine_no"},{title:"机器IP",key:"machine_ip"},{title:"机器密码",key:"machine_password"},{title:"代理人",key:"agent_name"},{title:"账户到期时间",key:"end_date",width:130,sortable:!0},{title:"剩余(天)",key:"time_left",width:100,sortable:!0},{title:"备注",key:"tip"},{title:"Action",slot:"action",width:130,fixed:"right",align:"center"}]}},computed:we({},Object(b["d"])(["accounts"]),{},Object(b["c"])(["getAccountsWithState"])),methods:we({},Object(b["b"])(["delAccount"]),{edit:function(e){this.showEditAccount=!0,this.activeRow=ie.deepCopy(e)},remove:function(e){console.log("=====> remove item:",e),this.delAccount({me:this,data:e})}})},Fe=ye,Oe=(a("7b55"),Object(s["a"])(Fe,te,ae,!1,null,"297fbb14",null)),ke=Oe.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"machine"},[a("Table",{attrs:{border:"",columns:e.machine_label,data:e.getMachinesWithState(e.$route.params.state)},scopedSlots:e._u([{key:"machine_no",fn:function(t){var n=t.row;return[a("strong",[e._v(e._s(n.machine_no))])]}},{key:"action",fn:function(t){var n=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(n)}}},[e._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(n)}}},[e._v("删除")])]}}])}),a("EditMachine",{attrs:{showModal:e.showEditMachine,machineDetail:e.activeMachine},on:{"update:showModal":function(t){e.showEditMachine=t},"update:show-modal":function(t){e.showEditMachine=t}}})],1)},Ve=[],je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-machine"},[a("Modal",{attrs:{title:"编辑机器",loading:e.loading},on:{"on-ok":function(t){return e.asyncOK("editMachineFormValidate")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Form",{ref:"editMachineFormValidate",attrs:{model:e.editMachineFormValidate,"label-width":80}},[a("FormItem",{attrs:{label:"机器代号",prop:"machine_no",rules:{required:!0,message:"机器代号, 如：a101",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入机器代号",readonly:""},model:{value:e.editMachineFormValidate.machine_no,callback:function(t){e.$set(e.editMachineFormValidate,"machine_no",t)},expression:"editMachineFormValidate.machine_no"}})],1),a("FormItem",{attrs:{label:"机器ip",prop:"machine_ip",rules:{required:!0,message:"机器ip, 如：192.168.1.1:6666",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入机器ip"},model:{value:e.editMachineFormValidate.machine_ip,callback:function(t){e.$set(e.editMachineFormValidate,"machine_ip",t)},expression:"editMachineFormValidate.machine_ip"}})],1),a("FormItem",{attrs:{label:"机器密码",prop:"machine_password",rules:{required:!0,message:"机器密码, 如：123456",trigger:"blur"}}},[a("i-input",{attrs:{placeholder:"输入机器密码"},model:{value:e.editMachineFormValidate.machine_password,callback:function(t){e.$set(e.editMachineFormValidate,"machine_password",t)},expression:"editMachineFormValidate.machine_password"}})],1),a("FormItem",{attrs:{label:"创建日期"}},[a("i-input",{attrs:{readonly:""},model:{value:e.editMachineFormValidate.machine_create_date,callback:function(t){e.$set(e.editMachineFormValidate,"machine_create_date",t)},expression:"editMachineFormValidate.machine_create_date"}})],1),a("FormItem",{attrs:{label:"到期日期"}},[a("DatePicker",{attrs:{type:"date",placeholder:"机器的到期日期"},model:{value:e.editMachineFormValidate.machine_end_date,callback:function(t){e.$set(e.editMachineFormValidate,"machine_end_date",t)},expression:"editMachineFormValidate.machine_end_date"}})],1),a("FormItem",{attrs:{label:"剩余时间"}},[a("i-input",{attrs:{placeholder:"输入该账号的使用时间",readonly:""},model:{value:e.editMachineFormValidate.machine_time_left,callback:function(t){e.$set(e.editMachineFormValidate,"machine_time_left",t)},expression:"editMachineFormValidate.machine_time_left"}})],1)],1)],1)],1)},Ae=[];function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var De={name:"EditMachine",props:{showModal:Boolean,machineDetail:Object},data:function(){return{show:!1,loading:!0,editMachineFormValidate:{}}},methods:Pe({},Object(b["b"])(["editMachine"]),{asyncOK:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.editMachineFormValidate.machine_end_date=ie.formatDate(t.editMachineFormValidate.machine_end_date),console.log("=====> end date: ",t.editMachineFormValidate.machine_end_date),t.editMachine({me:t,data:t.editMachineFormValidate})):t.$Message.warning("请检查你的输入内容")})),this.show=!1}}),watch:{showModal:function(){this.show=this.showModal},show:function(){this.$emit("update:showModal",this.show)},machineDetail:function(e){this.editMachineFormValidate=e}}},$e=De,Ie=Object(s["a"])($e,je,Ae,!1,null,"22674a14",null),Se=Ie.exports;function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var qe={name:"Machine",components:{EditMachine:Se},data:function(){return{showEditMachine:!1,activeMachine:{},machine_label:[{title:"机器代号",sortable:!0,slot:"machine_no"},{title:"绑定账户",key:"account_no"},{title:"机器ip",key:"machine_ip"},{title:"机器密码",key:"machine_password"},{title:"机器创建时间",key:"machine_create_date",sortable:!0},{title:"机器到期时间",key:"machine_end_date",sortable:!0},{title:"机器可用时间",key:"machine_time_left",sortable:!0},{title:"Action",slot:"action",width:150,align:"center"}]}},computed:Ce({},Object(b["c"])(["getMachinesWithState"])),methods:Ce({},Object(b["b"])(["eidtMachine","delMachine"]),{edit:function(e){this.showEditMachine=!0,this.activeMachine=ie.deepCopy(e)},remove:function(e){""==e.account_no||null==e.account_no?this.delMachine({me:this,data:e}):this.$Notice.info({title:"删除警告",desc:"请先解除该机器上的账户: "+e.account_no})}})},Be=qe,ze=(a("f9b6"),Object(s["a"])(Be,Me,Ve,!1,null,"971530fe",null)),We=ze.exports;n["default"].use(u["a"]);var Ke=new u["a"]({routes:[{path:"/",name:"load",component:Y},{path:"/home",name:"home",component:N,children:[{path:"accounts/:state",component:ke},{path:"machines/:state",component:We}]},{path:"/backup",name:"backup",components:ee}]});Ke.beforeEach((function(e,t,a){if("/"===e.path)a();else{var n=localStorage.getItem("Authorization"),o=localStorage.getItem("AuthDate");if("null"===n||""===n||void 0===n||""===o||void 0===o)a("/");else{var c=new Date(o),i=new Date,r=i.getTime()-c.getTime();Math.floor(r/36e5)>24?a("/"):a()}}}));var Ne=Ke,Te=a("f825"),Re=a.n(Te);a("f8ce"),a("a434");n["default"].use(b["a"]);var Le=new b["a"].Store({state:{accounts:[],machines:[],backups:[]},getters:{getAccountsWithState:function(e){return function(t){return"all"===t?e.accounts:"used"===t?e.accounts.filter((function(e){return e.time_left>0})):"unuse"===t?e.accounts.filter((function(e){return e.time_left<=0})):void console.log("===> getAccountsWithState unknown state: ",t)}},getAccountsWithName:function(e){return function(t){return e.accounts.filter((function(e){return e.agent_name===t}))}},getMachinesWithState:function(e){return function(t){return"formal"===t?e.machines.filter((function(e){return e.machine_time_left>0})):"expose"===t?e.machines.filter((function(e){return e.machine_time_left<=0})):"useful"===t?e.machines.filter((function(e){return e.machine_time_left>0&&""===e.account_no})):void console.log("===> getMachinesWithState unknown state: ",t)}},getEditMachines:function(e){return function(t){return e.machines.filter((function(e){return e.machine_time_left>0&&""===e.account_no||e.machine_no==t}))}}},mutations:{initMachines:function(e,t){for(var a in t){var o={id:t[a].id,machine_no:t[a].machine_no,machine_ip:t[a].machine_ip,machine_password:t[a].machine_password,machine_create_date:t[a].machine_create_date,machine_end_date:t[a].machine_end_date,account_no:t[a].account_no,machine_time_left:ie.dateDifference(t[a].machine_end_date)};n["default"].set(e.machines,a,o)}},initAccounts:function(e,t){for(var a in t){var o="",c="";for(var i in e.machines)e.machines[i].machine_no==t[a].machine_no&&(o=e.machines[i].machine_ip,c=e.machines[i].machine_password);var r={id:t[a].id,account_no:t[a].account_no,account_mail:t[a].account_mail,account_password:t[a].account_password,verify_mail:t[a].verify_mail,create_date:t[a].create_date,agent_name:t[a].agent_name,agent_date:t[a].agent_date,end_date:t[a].end_date,machine_no:t[a].machine_no,machine_ip:o,machine_password:c,time_left:ie.dateDifference(t[a].end_date),tip:t[a].tip};n["default"].set(e.accounts,a,r)}},initBackupFiles:function(e,t){for(var a in t)n["default"].set(e.backups,a,t[a])},addMachine:function(e,t){console.log("=======>  addMachine item: ",t);var a={id:t.id,machine_no:t.machine_no,machine_ip:t.machine_ip,machine_password:t.machine_password,machine_create_date:t.machine_create_date,machine_end_date:t.machine_end_date,machine_time_left:ie.dateDifference(t.machine_end_date)};n["default"].set(e.machines,e.machines.length,a)},addAccount:function(e,t){console.log("=======>  addAccount item: ",t);var a="",o="";for(var c in e.machines)if(e.machines[c].machine_no==t.machine_no){a=e.machines[c].machine_ip,o=e.machines[c].machine_password,e.machines[c].account_no=t.account_no;break}var i={id:t.id,account_no:t.account_no,account_mail:t.account_mail,account_password:t.account_password,verify_mail:t.verify_mail,create_date:t.create_date,agent_date:t.agent_date,agent_name:t.agent_name,end_date:t.end_date,machine_no:t.machine_no,machine_ip:a,machine_password:o,tip:t.tip,time_left:ie.dateDifference(t.end_date)};n["default"].set(e.accounts,e.accounts.length,i)},delAccount:function(e,t){for(var a in e.accounts)if(t.id===e.accounts[a].id){e.accounts.splice(a,1);break}if(console.log("====> delAccount item:",t),""!=t.machine_no)for(var o in e.machines)if(t.machine_no==e.machines[o].machine_no){var c=ie.deepCopy(e.machines[o]);c.account_no="",n["default"].set(e.machines,o,c),console.log("====> delAccount copy ok");break}},delMachine:function(e,t){for(var a in e.machines)if(t.id==e.machines[a].id){e.machines.splice(a,1);break}},backupFile:function(e,t){n["default"].set(e.backups,e.backups.length,t)},editMachine:function(e,t){for(var a in console.log("=====> editMachine item: ",t),e.machines)if(t.id==e.machines[a].id){var o={id:t.id,machine_ip:t.machine_ip,machine_no:t.machine_no,machine_password:t.machine_password,machine_create_date:t.machine_create_date,machine_end_date:t.machine_end_date,account_id:t.account_id,machine_time_left:ie.dateDifference(t.machine_end_date)};n["default"].set(e.machines,a,o);break}}},actions:{initAllInfo:function(e,t){var a=e.commit;C.getAllInfo().then((function(e){console.log("=====> 初始化的信息数据: ",e),"ok"==e.message?(a("initMachines",e.data.machines),a("initAccounts",e.data.accounts)):t.$Notice.error({title:"初始化数据失败",desc:e.message})}))},addAccount:function(e,t){var a=t.data;C.addAccount(a).then((function(a){console.log("====> add account: ",a),"ok"==a.message?e.commit("addAccount",a.data):t.me.$Notice.error({title:"添加账户失败",desc:a.message})}))},addMachine:function(e,t){var a=t.data;C.addMachine(a).then((function(a){console.log("====> add machine: ",a),"ok"==a.message?e.commit("addMachine",a.data):t.me.$Notice.error({title:"添加机器失败",desc:a.message})}))},delAccount:function(e,t){var a=t.data;C.delAccount(a).then((function(a){console.log("=====> del account: ",a),"ok"==a.message?e.commit("delAccount",a.data):t.me.$Notice.error({title:"删除账户错误",desc:a.message})}))},delMachine:function(e,t){var a=t.data;C.delMachine(a).then((function(a){"ok"==a.message?e.commit("delMachine",a.data):t.me.$Notice.error({title:"删除机器错误",desc:a.message})}))},editAccount:function(e,t){var a=e.dispatch,n=t.data;C.editAccount(n).then((function(e){console.log("======> edit account: ",e),"ok"===e.message?a("initAllInfo",t.me):t.me.$Notice.error({title:"更新账户错误",desc:e.message})}))},editMachine:function(e,t){var a=e.commit,n=t.data;console.log("=======> edit machine: ",n),C.editMachine(n).then((function(e){"ok"==e.message?a("editMachine",e.data):t.me.$Notice.error({title:"更新机器错误",desc:e.message})}))},backupFile:function(e,t){C.backup().then((function(a){console.log("======> backup file: ",a),"ok"===a.message?e.commit("backupFile",a.data):t.$Message.info("备份: ",a.message)}))}}});n["default"].use(Re.a),n["default"].config.productionTip=!1,new n["default"]({router:Ne,store:Le,render:function(e){return e(d)}}).$mount("#app")},6776:function(e,t,a){"use strict";var n=a("5170"),o=a.n(n);o.a},"7b55":function(e,t,a){"use strict";var n=a("151f"),o=a.n(n);o.a},"85ec":function(e,t,a){},"89e4":function(e,t,a){},"90b7":function(e,t,a){"use strict";var n=a("9856"),o=a.n(n);o.a},9856:function(e,t,a){},"9cff":function(e,t,a){"use strict";var n=a("167e"),o=a.n(n);o.a},f9b6:function(e,t,a){"use strict";var n=a("89e4"),o=a.n(n);o.a}});
//# sourceMappingURL=app.9171a2fc.js.map